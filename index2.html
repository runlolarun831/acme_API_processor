<!-- scratchpad 2 -->
<html>
  <head>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.js'></script>
  </head>
  <body>
    <script>
      const loadData = async()=> {
        const urls = [
          'https://acme-users-api-rev.herokuapp.com/api/companies',
          'https://acme-users-api-rev.herokuapp.com/api/products',
          'https://acme-users-api-rev.herokuapp.com/api/offerings',
        ];
      const responses = await Promise.all(urls.map( url=> axios.get(url)));

      const [companies, products, offerings ] = responses.map( response => response.data);
      //console.log(companies);
/*
      //return products within a price range
      const findProductsInPrice = (products, range) => products.filter(product => product.suggestedPrice >= range.min && product.suggestedPrice <= range.max);

      const productsInPriceRange = findProductsInPrice(products, { min: 1, max: 15});
      console.log(productsInPriceRange);
*/
/*
      // returns object where key is first letter of company name
      // value for each key is the array of those companies
      const groupCompaniesByLetter = (companies) => {
        const compNameObj = {};
        companies.map(company => {
          let first = (company.name).charAt(0);
          if( !(first in compNameObj)) {
            compNameObj[first] = [company];
          }
          else {
            compNameObj[first].push(company);
          }
        } )
        return compNameObj;
      };

      const groupedCompaniesByLetter = groupCompaniesByLetter(companies);
      console.log(groupedCompaniesByLetter);
*/
/*
      // returns object where key is a state
      // value for each key is the array of those companies in that state
      const groupCompaniesByState = (companies) => {
        const compStateObj = {};
        companies.map( company => {
          let compState = company.state;
        if ( !(compState in compStateObj)) {
            compStateObj[compState] = [company];
          }
        else {
            compStateObj[compState].push(company);
          }
        })
        return compStateObj;
      };

      const groupedCompaniesByState = groupCompaniesByState(companies);
      console.log(groupedCompaniesByState);
*/


// returns an array of offerings with each offering having a company and product

// new array  is this what they want returned in array?
//   [{price:1.00, company: company name, product name}, {price:2.00, company: company name, product name} ]
// or
// new array? do they want me to add "company" and "product" to each offerings object?

const processOfferings = ({companies, products, offerings}) => {
  console.log(companies[0]);
  console.log(products[0]);
  console.log(offerings[0]);
  products.forEach(product => {
    console.log('this is product.name' );
    console.log(product.name);
    console.log('this is product.id' );
    console.log(product.id)

 })
  ;
}

const processedOfferings = processOfferings( { companies, products, offerings});
console.log(processedOfferings);


      //example
      const companiesByState = (companies, state) => companies.filter(company => company.state === state);

      //returns companiesByState
      const companiesInTexas = companiesByState(companies, 'Texas');
      console.log(companiesInTexas);
      } ;
      loadData();

    </script>
  </body>
</html>
